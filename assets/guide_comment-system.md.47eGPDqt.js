import{_ as i,c as a,o as n,ag as t}from"./chunks/framework.4MsdTtZo.js";const E=JSON.parse('{"title":"评论互动系统","description":"","frontmatter":{},"headers":[],"relativePath":"guide/comment-system.md","filePath":"guide/comment-system.md"}'),e={name:"guide/comment-system.md"};function l(h,s,p,k,r,o){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="评论互动系统" tabindex="-1">评论互动系统 <a class="header-anchor" href="#评论互动系统" aria-label="Permalink to &quot;评论互动系统&quot;">​</a></h1><p>本插件提供了一套带审核机制的评论管理系统，支持无限级回复嵌套，并自动记录评论者的安全信息。</p><h2 id="审核机制说明" tabindex="-1">审核机制说明 <a class="header-anchor" href="#审核机制说明" aria-label="Permalink to &quot;审核机制说明&quot;">​</a></h2><p>为了防止恶意广告或垃圾言论，评论采用 <strong>三段式状态</strong> 管理：</p><ol><li><strong>待审核 (pending)</strong>: 默认状态。评论已提交，但 API 默认不会返回该内容。</li><li><strong>已通过 (approved)</strong>: 管理员审核通过后，该评论才会显示在网站上。</li><li><strong>已拒绝 (rejected)</strong>: 彻底拦截该评论。</li></ol><hr><h2 id="api-调用" tabindex="-1">API 调用 <a class="header-anchor" href="#api-调用" aria-label="Permalink to &quot;API 调用&quot;">​</a></h2><h3 id="_1-提交评论" tabindex="-1">1. 提交评论 <a class="header-anchor" href="#_1-提交评论" aria-label="Permalink to &quot;1. 提交评论&quot;">​</a></h3><p>支持游客或登录用户提交。系统会自动记录 <code>IP 地址</code> 和 <code>User-Agent</code>。</p><p><strong>接口地址:</strong> <code>POST /api/bag/comments</code></p><p><strong>请求体 (Body):</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;这是一条非常棒的评论！&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;article&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 关联的文章 ID</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 可选：关联的用户 ID</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;parent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 可选：回复某条评论时的父级评论 ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-获取文章评论列表" tabindex="-1">2. 获取文章评论列表 <a class="header-anchor" href="#_2-获取文章评论列表" aria-label="Permalink to &quot;2. 获取文章评论列表&quot;">​</a></h3><p>只拉取该文章下 <code>已通过 (approved)</code> 的评论，并自动格式化为 <strong>树形嵌套结构</strong>。</p><p><strong>接口地址:</strong> <code>GET /api/bag/articles/:articleId/comments</code></p><p><strong>返回结构示例:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;主评论&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;children&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;回复主评论的内容&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;children&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="管理员回复标识" tabindex="-1">管理员回复标识 <a class="header-anchor" href="#管理员回复标识" aria-label="Permalink to &quot;管理员回复标识&quot;">​</a></h2><p>在后台评论管理中，有一个 <code>是否管理员回复 (isAdmin)</code> 勾选框。管理员在回复用户时勾选此项，前端可以据此渲染 “官方” 或 “作者” 标识，提升互动权威性。</p>`,20)])])}const c=i(e,[["render",l]]);export{E as __pageData,c as default};
