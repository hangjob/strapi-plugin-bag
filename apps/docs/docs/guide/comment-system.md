# 评论互动系统

本插件提供了一套带审核机制的评论管理系统，支持无限级回复嵌套，并自动记录评论者的安全信息。

## 审核机制说明

为了防止恶意广告或垃圾言论，评论采用 **三段式状态** 管理：

1. **待审核 (pending)**: 默认状态。评论已提交，但 API 默认不会返回该内容。
2. **已通过 (approved)**: 管理员审核通过后，该评论才会显示在网站上。
3. **已拒绝 (rejected)**: 彻底拦截该评论。

---

## API 调用

### 1. 提交评论
支持游客或登录用户提交。系统会自动记录 `IP 地址` 和 `User-Agent`。

**接口地址:** `POST /api/bag/comments`

**请求体 (Body):**
```json
{
  "content": "这是一条非常棒的评论！",
  "article": 1, // 关联的文章 ID
  "author": 5,  // 可选：关联的用户 ID
  "parent": 10  // 可选：回复某条评论时的父级评论 ID
}
```

### 2. 获取文章评论列表
只拉取该文章下 `已通过 (approved)` 的评论，并自动格式化为 **树形嵌套结构**。

**接口地址:** `GET /api/bag/articles/:articleId/comments`

**返回结构示例:**
```json
{
  "data": [
    {
      "id": 1,
      "content": "主评论",
      "children": [
        {
          "id": 2,
          "content": "回复主评论的内容",
          "children": []
        }
      ]
    }
  ]
}
```

---

## 管理员回复标识

在后台评论管理中，有一个 `是否管理员回复 (isAdmin)` 勾选框。管理员在回复用户时勾选此项，前端可以据此渲染 “官方” 或 “作者” 标识，提升互动权威性。

